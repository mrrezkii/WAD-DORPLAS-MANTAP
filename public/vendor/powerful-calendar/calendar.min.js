!function(s){var l=new Date;l.setHours(0,0,0,0);var o,c,e={date:null,weekDayLength:1,prevButton:"Prev",nextButton:"Next",monthYearSeparator:" ",onClickDate:function(t){},onChangeMonth:function(t){},onClickToday:function(t){},onClickMonthNext:function(t){},onClickMonthPrev:function(t){},onClickYearNext:function(t){},onClickYearPrev:function(t){},onShowYearView:function(t){},onSelectYear:function(t){},showThreeMonthsInARow:!0,enableMonthChange:!0,enableYearView:!0,showTodayButton:!0,highlightSelectedWeekday:!0,highlightSelectedWeek:!0,todayButtonContent:"Today",showYearDropdown:!1,min:null,max:null,disable:function(t){},startOnMonday:!1,monthMap:{1:"january",2:"february",3:"march",4:"april",5:"may",6:"june",7:"july",8:"august",9:"september",10:"october",11:"november",12:"december"},dayMap:{0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"},alternateDayMap:{1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday",7:"sunday"}},g=!1;function p(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function i(t,e){var n,a=(l=(l=t).getMonth()+1+"/1/"+l.getFullYear(),new Date(l)),s=a.getDate(),o=p(t),i=(l=(n=t).getMonth(),n=n.getFullYear(),0===l&&(--n,l=12),new Date(n,l,0).getDate()),r=[],l=a.getDay();settings.startOnMonday&&(l-=1);var c=1;if(1===e){var g=l-1<0?6+l:l-1;if(g<6)for(;0<=g;g--){var d=new Date(t.getFullYear(),t.getMonth()-1,i-g);r.push(d)}for(var u=7-r.length,h=0;h<u;h++){d=new Date(a.getFullYear(),a.getMonth(),s+h);r.push(d)}}else for(var f=7*(e-(l<0?2:1))-l,y=1;y<=7;y++)d=f+y<=o?new Date(t.getFullYear(),t.getMonth(),f+y):new Date(t.getFullYear(),t.getMonth()+1,c++),r.push(d);return r}function r(t,e){var i,r,n,a="";return a+='<div class="calendar-box">',g?(a+='<div class="months-container">',a+=function(t){var e='<div class="buttons-container">'+(settings.enableMonthChange&&settings.enableYearView?'<button class="prev-button">'+settings.prevButton+"</button>":"")+'<span class="label-container year-label">';if(settings.showYearDropdown){e+='<select class="year-dropdown">';for(var n=1970;n<2117;n++)n===t.getFullYear()?e+='<option selected="selected" value="'+n+'">'+n+"</option>":e+='<option value="'+n+'">'+n+"</option>";e+="</select>"}else e+=t.getFullYear();return e+="</span>"+(settings.enableMonthChange&&settings.enableYearView?'<button class="next-button">'+settings.nextButton+"</button>":"")+"</div>"}(e),a+=function(t){var e,n="";for(e in n+='<div class="months-wrapper">',settings.monthMap)settings.monthMap.hasOwnProperty(e)&&(n+='<span class="month'+(settings.showThreeMonthsInARow?" one-third":"")+'" data-month="'+e+'" data-year="'+t.getFullYear()+'"><span>'+settings.monthMap[e]+"</span></span>");return n+="</div>"}(e)):(a+='<div class="weeks-container">',a+=(n=e,'<div class="buttons-container">'+(settings.enableMonthChange?'<button class="prev-button">'+settings.prevButton+"</button>":"")+'<span class="label-container month-container"><span class="month-label">'+settings.monthMap[n.getMonth()+1]+"</span>"+settings.monthYearSeparator+'<span class="year-label">'+n.getFullYear()+"</span></span>"+(settings.enableMonthChange?'<button class="next-button">'+settings.nextButton+"</button>":"")+"</div>"),a+=function(){var t,e="";for(t in e+='<div class="weeks-wrapper header">',e+='<div class="week'+(settings.startOnMonday?" start-on-monday":"")+'" data-week-no="0">',settings.dayMap)settings.dayMap.hasOwnProperty(t)&&(e+='<div class="day header" data-day="'+t+'">'+("function"==typeof settings.formatWeekDay?settings.formatWeekDay(t):settings.dayMap[t].substring(0,settings.weekDayLength))+"</div>");return e+="</div>",e+="</div>"}(),a+=(i=e,r="",r+='<div class="weeks-wrapper">',t.forEach(function(t,e){r+='<div class="week'+(settings.startOnMonday?" start-on-monday":"")+'" data-week-no="'+(e+1)+'">',t.forEach(function(t,e){var n=!1,n=(n=t.getMonth()!==i.getMonth()?!0:n)?" disabled":"",a=!1,a=c&&(t==c.toString()||a)?" selected":"",s=!1,s=(s=t==l.toString()?!0:s)?" today":"",o="ola";(settings.min&&settings.min>t||settings.max&&settings.max<t||settings.disable&&"function"==typeof settings.disable&&settings.disable(t))&&(o='disabled="disabled" '),r+='<div class="day'+n+a+s+'" data-date="'+t+'" '+o+" ><span>"+("function"==typeof settings.formatDate?settings.formatDate(t):t.getDate())+"</span></div>"}),r+="</div>"}),r+="</div>")),a+="</div>",settings.showTodayButton&&(a+='<div class="special-buttons"><button class="today-button">'+settings.todayButtonContent+"</button></div>"),a+="</div>"}function d(t){var n,e,a=function(t){for(var e=p(t).getDate(),n=p(t).getDate(),a=parseInt(e/7)+1,s=[],o=1;o<=a;o++)s.push(i(t,o));return(e=(e=s[s.length-1])[e.length-1].getDate())<n&&n-e<7&&s.push(i(t,o)),s}(t);o.html(r(a,t)),settings.highlightSelectedWeekday&&0<(e=o.find(".selected")).length&&(n=new Date(e.data("date")).getDay(),o.find(".week").each(function(t,e){s(e).find(".day:eq("+(n-(settings.startOnMonday?1:0))+")").addClass("highlight")})),settings.highlightSelectedWeek&&o.find(".selected").parents(".week").addClass("highlight")}s.fn.updateCalendarOptions=function(t){t=s.extend(settings,t);s.fn.calendar.bind(this)(t)},s.fn.calendar=function(t){var a;return settings=s.extend(e,t),settings.startOnMonday&&(settings.dayMap=settings.alternateDayMap),settings.min&&(settings.min=new Date(settings.min),settings.min.setHours(0),settings.min.setMinutes(0),settings.min.setSeconds(0)),settings.max&&(settings.max=new Date(settings.max),settings.max.setHours(0),settings.max.setMinutes(0),settings.max.setSeconds(0)),o=s(this),a=settings.date?((c="string"==typeof settings.date?new Date(settings.date):settings.date).setHours(0,0,0,0),c):l,d(window.currentDate=a),settings.enableMonthChange&&(o.off("click",".weeks-container .prev-button").on("click",".weeks-container .prev-button",function(t){a=new Date(a.getFullYear(),a.getMonth()-1,1),settings.onClickMonthPrev(a),d(a)}),o.off("click",".weeks-container .next-button").on("click",".weeks-container .next-button",function(t){a=new Date(a.getFullYear(),a.getMonth()+1,1),settings.onClickMonthNext(a),d(a)})),o.off("click",".day").on("click",".day",function(t){var e=s(this).data("date");"disabled"===s(this).attr("disabled")||settings.onClickDate(e)}),settings.enableMonthChange&&settings.enableYearView&&(o.off("click",".month-container").on("click",".month-container",function(t){g=!0,a=new Date(a.getFullYear(),0,1),settings.onShowYearView(a),d(a)}),o.off("click",".months-container .month").on("click",".months-container .month",function(t){var e=s(this),n=e.data("month"),e=e.data("year"),n=new Date(e,n-1,1);settings.onChangeMonth(n),g=!1,d(a=n)}),o.off("click",".months-container .prev-button").on("click",".months-container .prev-button",function(t){a=new Date(a.getFullYear()-1,0,1),settings.onClickYearPrev(a),settings.onSelectYear(a),d(a)}),o.off("click",".months-container .next-button").on("click",".months-container .next-button",function(t){a=new Date(a.getFullYear()+1,0,1),settings.onClickMonthNext(a),settings.onSelectYear(a),d(a)}),o.off("change",".months-container .year-dropdown").on("change",".months-container .year-dropdown",function(t){var e=s(this).val();a=new Date(e,0,1),settings.onSelectYear(a),d(a)})),settings.showTodayButton&&o.off("click",".today-button").on("click",".today-button",function(t){c=a=l,settings.onClickToday(l),settings.onClickDate(l),g=!1,d(a)}),this.getSelectedDate=function(){return c},this}}(jQuery);